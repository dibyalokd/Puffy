import re
import os

def load_pom_locators(file_path):
    locators = {}
    
    try:
        with open(file_path, 'r', encoding='utf-8') as file:
            content = file.read()

        # 1. Remove Block Comments (/* ... */) 
        # flags=re.DOTALL allows '.' to match newlines
        content = re.sub(r'/\*.*?\*/', '', content, flags=re.DOTALL)

        # 2. Remove Single Line Comments (// ...)
        # This matches // until the end of that specific line
        content = re.sub(r'//.*?\n', '\n', content)

        # 3. Now find the FindBy patterns in the "clean" content
        # Pattern: xpath="...", static WebElement name;
        pattern = r'xpath\s*=\s*["\']([^"\']+)["\'].*?WebElement\s+(\w+);'
        
        matches = re.finditer(pattern, content, flags=re.DOTALL)
        
        for match in matches:
            xpath_value = match.group(1)
            variable_name = match.group(2)
            locators[variable_name] = xpath_value
            
        return locators

    except FileNotFoundError:
        print(f"Error: File not found at {file_path}")
        return {}

# Usage
# page_elements = load_pom_locators("YourPageFile.java")
